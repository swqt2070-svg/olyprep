{% extends "base.html" %}

{% block title %}Результаты теста{% endblock %}

{% block content %}
<div class="page-inner page-test-result">
    <h1 class="page-title">Результаты теста «{{ test.title }}»</h1>

    <div class="card card-test-result-summary">
        <div class="result-main">
            <div class="result-score">
                Итоговый балл: <strong>{{ total_score }} / {{ max_total }}</strong>
            </div>
        </div>
    </div>

    <div class="card card-test-result-details">
        <h2 class="card-title">Детализация по задачам</h2>

        <div class="table-wrapper">
            <table class="result-table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Задача</th>
                        <th>Ваш ответ</th>
                        <th>Правильный ответ</th>
                        <th>Баллы</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in rows %}
                        <tr>
                            <td>{{ row.index }}</td>
                            <td class="col-question">
                                {{ row.question.text | replace('\n', '<br>') | safe }}
                            </td>
                            <td class="col-answer">{{ row.your_answer }}</td>
                            <td class="col-answer">{{ row.correct_answer }}</td>
                            <td>{{ row.score }} / {{ row.max_points }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_styles %}
<style>
    .page-test-result .card-test-result-summary,
    .page-test-result .card-test-result-details {
        max-width: 1200px;
        margin: 0 auto 24px auto;
        padding: 20px 24px;
    }

    .page-test-result .result-score {
        font-size: 18px;
    }

    .page-test-result .table-wrapper {
        width: 100%;
        overflow-x: auto;
    }

    .page-test-result .result-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 14px;
    }

    .page-test-result .result-table th,
    .page-test-result .result-table td {
        padding: 8px 10px;
        border-bottom: 1px solid rgba(255,255,255,0.06);
        vertical-align: top;
    }

    .page-test-result .result-table th {
        text-align: left;
        font-weight: 500;
        color: #aeb4c5;
        white-space: nowrap;
    }

    .page-test-result .col-question {
        min-width: 260px;
    }

    .page-test-result .col-answer {
        min-width: 160px;
    }
</style>
{% endblock %}
